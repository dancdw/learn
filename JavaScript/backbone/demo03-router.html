<!DOCTYPE html>
<html>

<head>
    <title>the5fire-backbone-model</title>
    <meta charset="utf-8">
</head>

<body>
    <a href="#actions">testActions</a>
    <a href="#/posts/120">Post 120</a>
    <a href="#/download/user/images/hey.gif">download gif</a>
    <a href="#/dashboard/graph">Load Route/Action View</a>
    <a href="#/manual">manual</a>
</body>
<script src="http://the5fireblog.b0.upaiyun.com/staticfile/jquery-1.10.2.js"></script>
<script src="http://the5fireblog.b0.upaiyun.com/staticfile/underscore.js"></script>
<script src="http://the5fireblog.b0.upaiyun.com/staticfile/backbone.js"></script>
<script>
(function($) {
    var AppRouter = Backbone.Router.extend({
        // url 改变时触发该对应函数
        routes: {
            "posts/:id": "getPost",
            "download/*path": "downloadFile",
            ":route/:action": "loadView",
            "manual": "manual",
            "*actions": "defaultRoute"
        },

        getPost: function(id) {
            console.log(id);
        },

        defaultRoute: function(actions) {
            console.log(actions);
        },

        downloadFile: function(path) {
            console.log(path);
        },

        loadView: function(route, action) {
            console.log(route + "_" + action);
        },

        manual: function() {
            console.log("call manual");
            app_router.navigate("/posts/" + 404, {
                trigger: true, // 是否触发事件
                replace: true // url 替换
            });
        }
    });

    var app_router = new AppRouter;

    Backbone.history.start();
})(jQuery);
</script>

</html>
