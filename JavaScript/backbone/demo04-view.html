<!DOCTYPE html>
<html>

<head>
    <title>the5fire-backbone-view</title>
</head>

<body>
    <div id="search_container"></div>
    <script type="text/template" id="search_template">
        <label>
            <%= search_label %>
        </label>
        <input type="text" id="search_input" />
        <input type="button" id="search_button" value="Search" />
        <ul>
            <% _.each(labels, function(name) { %>
                <% if(name != "label2") {%>
                    <li>
                        <%= name %>
                    </li>
                    <% } %>
                        <% }); %>
        </ul>
    </script>
    <script src="http://the5fireblog.b0.upaiyun.com/staticfile/jquery-1.10.2.js"></script>
    <script src="http://the5fireblog.b0.upaiyun.com/staticfile/underscore-min.1.8.2.js"></script>
    <script src="http://the5fireblog.b0.upaiyun.com/staticfile/backbone.js"></script>
    <script>
    (function($) {
        var SearchView = Backbone.View.extend({
            // 视图容器
            el: $("#search_container"),
            // 添加绑定事件
            events: {
                'click input[type=button]': 'doSearch'
            },
            // 初始化
            initialize: function() {
                var labels = ['label1', 'label2', 'label3'];
                this.render({
                    labels: labels,
                    search_label: "搜索渲染"
                });
            },
            render: function(context) {
                // 使用 underscore 库编译模板
                var template = _.template($("#search_template").html());
                // 模板渲染并插入到 DOM 中
                $(this.el).html(template(context));
            },
            doSearch: function(event) {
                console.log("search for " + $("#search_input").val());
            }
        });

        var searchView = new SearchView();
        // searchView.el = $("#search_container");

        // searchView.render({
        //     search_label: "搜索渲染"
        // });
    })(jQuery);
    </script>
</body>

</html>
